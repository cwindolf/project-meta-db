Project Metadata Database
=========================


Setting Up
----------

 - Choose credentials and edit `config.py` with the correct info (`HOST`, `USER`, `DATABASE`, `PASSWORD`, etc.).

 - Make sure that there is a Postgres server running at `HOST` with a role for username `USER` with password `PASSWORD` with `CREATEDB` privileges. E.g. try running something like the following query from a superuser Postgres role:

    > CREATE ROLE $USER WITH CREATEDB LOGIN PASSWORD '$PASSWORD';

 - From your shell, run `$ python create_db.py` to create the database `DATABASE` and create the tables.


Usage
-----

The API lives in `src/actions.py`. The most useful function is probably `add_dataset(...)` which is documented in its docstring. It's meant to be imported in data packaging scripts, and called to automatically connect to this database and add a new entry.

The schema is defined in `src/schema.py`. It was autogenerated from [this diagram](https://editor.ponyorm.com/user/chwindolf/meta).
